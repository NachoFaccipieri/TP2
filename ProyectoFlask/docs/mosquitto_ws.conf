###############################################################################
# Ejemplo de configuración de Mosquitto con soporte WebSockets
# Copiar este archivo a: /etc/mosquitto/conf.d/01-websockets.conf
# Reiniciar mosquitto después de editar: sudo systemctl restart mosquitto
###############################################################################

# Listener MQTT TCP estándar (puerto 1883)
listener 1883
protocol mqtt

# Listener para WebSockets (usado por clientes web javascript)
# Puerto típico: 9001 (sin TLS). Para WSS con TLS terminando en nginx, se puede
# dejar mosquitto escuchando en localhost y exponer WSS a través de nginx.
listener 9001
protocol websockets

# (Opcional) archivo de persistencia y logs
persistence true
persistence_location /var/lib/mosquitto/
log_type error
log_type warning
log_type notice
log_type information

# Seguridad (ejemplo mínimo).
# En producción configurar usuarios/contraseñas y ACLs. Para habilitar usuario:
#  sudo mosquitto_passwd -c /etc/mosquitto/passwd tu_usuario
#  password_file /etc/mosquitto/passwd
#  allow_anonymous false

# ACL example (opcional): crear /etc/mosquitto/acl
# acl_file /etc/mosquitto/acl

# Nota:
# - Asegurate de instalar mosquitto que soporte websockets. En Raspbian/Ubuntu
#   recientes el paquete oficial suele incluirlo. Si falla, instalar desde repos
#   o compilar con libwebsockets.
